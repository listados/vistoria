webpackJsonp([1],[
/* 0 */,
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(2);


/***/ }),
/* 2 */
/***/ (function(module, exports) {

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

$(document).ready(function () {
    var _language;

    PNotify.prototype.options.styling = "bootstrap3";
    PNotify.prototype.options.styling = "fontawesome";
    $("#load_print_survey").hide();
    $('[data-toggle="tooltip"]').tooltip();
    $("#table-survey").DataTable({
        processing: true,
        //serverSide: true,
        iDisplayLength: 50,
        language: (_language = {
            rows: "%d linhas selecionada",
            infoEmpty: "Sem registro para mostrar",
            infoFiltered: " - Filtrando para _MAX_ registros"
        }, _defineProperty(_language, "infoEmpty", 'Mostrando 0 de 0 para 0 registros'), _defineProperty(_language, "lengthMenu", "Mostrando _MENU_ registro"), _defineProperty(_language, "loadingRecords", "Lendo..."), _defineProperty(_language, "processing", "Processando..."), _defineProperty(_language, "search", "Pesquisar por:"), _defineProperty(_language, "zeroRecords", "Nenhum registro encontrado"), _defineProperty(_language, "paginate", {
            first: "Primeiro",
            last: "Último",
            next: "Próximo",
            previous: "Anterior"
        }), _language),
        ajax: domain_complet + '/vistoria/all-survey',
        order: [[0, "desc"]],
        columns: [{ data: 'survey_code', name: 'survey_code' }, { data: 'survey_address_immobile', name: 'survey_address_immobile' }, { data: 'survey_date_register', name: 'survey_date_register' }, { data: 'survey_type_immobile', name: 'survey_type_immobile' }, { data: 'survey_inspetor_name', name: 'survey_inspetor_name' }, { data: 'survey_status', name: 'survey_status' }, { data: 'action', name: 'action', orderable: false, searchable: false }]

    });

    //EDITOR DE CONTEÚDO
    CKEDITOR.replace('survey_general_aspects');
    CKEDITOR.replace('survey_reservation');
    CKEDITOR.replace('survey_provisions');
    CKEDITOR.replace('survey_keys');
    /*
    Link exemplo : http://makitweb.com/dynamically-add-and-remove-element-with-jquery/
    @autor: Excellence Soft - Junior Oliveira
    Para locador nome do campo é: locator
    Para Locatário nome do campo é: occupant
    Para Fiador o nome do campo é: guarantor
    */
    // Removendo elemento
    $('.container').on('click', '.remove', function () {
        var id = this.id;
        var split_id = id.split("_");
        var deleteindex = split_id[1];
        // Remove <div> with id
        $("#div_" + deleteindex).remove();
    });

    $('.containerLocatario').on('click', '.removeLocatario', function () {
        var id = this.id;
        var split_id = id.split("_");
        var deleteindex = split_id[1];
        // Remove <div> with id
        $("#divLocatario_" + deleteindex).remove();
    });
    $('.containerFiador').on('click', '.removeFiador', function () {
        var id = this.id;
        var split_id = id.split("_");
        var deleteindex = split_id[1];
        // Remove <div> with id
        $("#divFiador_" + deleteindex).remove();
    });

    $('.modal').on({
        'show.bs.modal': function showBsModal() {
            var idx = $('.modal:visible').length;
            $(this).css('z-index', 1040 + 10 * idx);
        },
        'shown.bs.modal': function shownBsModal() {
            var idx = $('.modal:visible').length - 1; // raise backdrop after animation.
            $('.modal-backdrop').not('.stacked').css('z-index', 1039 + 10 * idx).addClass('stacked');
        },
        'hidden.bs.modal': function hiddenBsModal() {
            if ($('.modal:visible').length > 0) {
                // restore the modal-open class to the body element, so that scrolling works
                // properly after de-stacking a modal.
                setTimeout(function () {
                    $(document.body).addClass('modal-open');
                }, 0);
            }
        }
    });
});
$(function () {
    //$('[data-toggle="tooltip"]').tooltip();
    //SALVAR VISTORIA
    $("#save_button").click(function (event) {
        $("#load-modal").modal('show');
        //ATRIBUINDO UM RASCUNHO
        $("#survey_status").val("Rascunho");
        //FORÇANDO A ATUALIZAR OS VALORES DO CKEDITOR
        for (instance in CKEDITOR.instances) {
            CKEDITOR.instances[instance].updateElement();
        }
        $.ajax({
            url: domain_complet + '/vistoria/update',
            type: "post",
            dataType: "JSON",
            data: $("#form_survey").serialize(),
            success: function success(data) {
                $("#load-modal").modal('show');
                $("#gif-load-modal").hide();
                $("#label-title-load-modal").html('Rascunho salvo com sucesso');
                $("#success-load-modal").append('<i class="fa fa-check-circle fa-3x"></i>');
                $("#success-load-modal").addClass('text-success');
                $("#success-load-modal").show();
                //ADICIONANDO BOTÃO DE CONTINUAR NA VISTORIA OU SAIR PARA PÁGINA INICIAL
                $("#footer_load_modal").append('<div class="modal-footer">\
                <a href="' + domain_complet + '/vistoria" class="btn btn-default" data-dismiss="modal">Sair da Vistoria</a>\
                <a href="' + domain_complet + '/vistoria/' + id_survey_enc + '/editar/Editar-Vistoria/acao" class="btn btn-primary">Continuar na vistoria</a>\
                </div>');
            }
        }).done(function () {
            console.log("success");
        }).fail(function () {
            console.log("error");
        }).always(function () {
            console.log("complete");
        });
    });

    $(".click_print_survey").click(function () {
        $("#load_print_survey").show();
    });
});

/***/ })
],[1]);